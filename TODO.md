Figure out single-with-populate shit

Allow recursive routes

Support nested populate querystring params

Clean up code to be simpler